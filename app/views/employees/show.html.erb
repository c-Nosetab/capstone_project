<h1 style="text-decoration: underline;">Employee Info:</h1>


<% if current_user.id == @employee.id  || current_user.is_manager? || current_user.is_admin? %>



<div class="employee-show row" style="line-height: 12px">
  <div class="col-lg-3 col-md-6 col-sm-12 employee-photo-show">
    <% if @employee.image_file_name %>
      <%= image_tag @employee.image.url(:thumb) %>
    <% else %>
      <img src="https://www.betafy.co/assets/img/default_user.png" alt="profile picture placeholder">
    <% end %>
  </div>
  <div class="col-lg-8 col-md-6 col-sm-12 employee-text-show">
    <h3><strong><%= "#{@employee.first_name.capitalize} #{@employee.last_name.capitalize} - #{@employee.manager?} #{@employee.position.position_name}" %></strong></h3>
    <h3>Email: <a href="mailto:<%= @employee.email %>"><%= @employee.email %></a></h3>
    <h3>Phone: <%= @employee.phone %></h3>
  <br>
    <% if current_user.is_admin? || current_user.id == @employee.id %>
      <div class="address">
        <h6>Address:</h6>
        <h6><%= "#{@employee.address}, #{@employee.address2}" %></h6>
        <h6><%= "#{@employee.city}, #{@employee.state} #{@employee.zip}" %></h6>
      </div>
    <% end %>
  </div>

  </div>
  <br>
  <h2 style="text-decoration: underline;">Upcoming Shifts:</h2>
  <ul>
    <% @employee.shifts.where(:date => (Date.today - 1.week)..Time.now + 1.month).order(:date).each do |shift| %>
      <% if shift.date >= (Time.now - 1.day) %>
        <% if shift.date.month == Date.today.month && shift.date.day == Date.today.day %>
          <li class="shift-today"><strong>SHIFT IS TODAY</strong> - <%= shift.day_of_week.capitalize %>, <%= shift.date.strftime('%b %d') %> -- <%= shift.time_start.strftime('%l:%M %p') %> -- <%= shift.time_end.strftime('%l:%M %p') %></li>
        <% else %>
         <li><%= shift.day_of_week.capitalize %>, <%= shift.date.strftime('%b %d') %> -- <%= shift.time_start.strftime('%l:%M %p') %> -- <%= shift.time_end.strftime('%l:%M %p') %></li>
        <% end %>
      <% end %>
    <% end %>
  </ul>
  <hr>
<% end %>


  <% if current_user.id == @employee.id%>



    <%= form_for @employee, url: update_image_path, html: {multipart: true} do |f| %>
      <%= label_tag "Update Profile Picture:" %> <%= f.file_field :image %>
      <%= submit_tag "Update Image" %>
    <% end %>





    <h2><a href="/employees/<%= @employee.id %>/availability">See Current Availability</a></h2>
    <br>
    <%= link_to "Edit Your Info", "/employees/#{@employee.id}/edit" %>
  <% elsif current_user.is_admin?%>
    <h3><%= link_to "See Employee Availability", "/employees/#{@employee.id}/availability" %></h3>
    <%= link_to "Change Employee Position", "/employees/#{@employee.id}/edit" %> |
    <%= link_to "Delete", "/employees/#{@employee.id}", method: :delete %>


  <% end %>
