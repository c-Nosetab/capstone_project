<h1>Shifts:</h1>

  <div id="add-shift">
    <button href="/shifts/new">Add New Shift</button>
  </div>
  <table>
    <tr>
      <th colspan="7" class="main-head-thing"><%= Time.now.strftime('%B') %></th>
    </tr>
    <tr>
      <% 7.times do |index| %>
        <th><%= (@time.sunday + index.days).strftime('%A') %></th>
      <% end %>
    </tr>


    <tr>
      <% if @skip_cells > 0 %>
        <td colspan="<%= @skip_cells %>" class="non-date"></td>
      <% end %>

      <% (7 - @skip_cells ).times do |index| %>
          <div class="cal-container">
            <% if Time.utc(@time.year, @time.month, 1) == Date.today %>
              <td class="today">
            <% elsif Time.utc(@time.year, @time.month, 1) < Date.today %>
              <td class="past">
            <% else %>
              <td>
            <% end %>
              <div class="cal-container">
                <p>1</p>
                  <ul>
                    <% @shifts.select{|shift| shift.date == Time.utc(@time.year, @time.month, 1)}.each do |shift| %>
                      <li><a href="/shifts/<%= shift.id %>"><%= shift.time_start.strftime('%l:%M %p') %> - <%= shift.time_end.strftime('%l:%M %p') %></a></li>
                    <% end %>
                  </ul>
              </div>
            </td>
          </div>
      <% end %>
    </tr>

    <% while @count < (Time.now.at_end_of_month.day + 1 ) do %>
      <tr>
        <% 7.times do |index2| %>
          <% if @count < (Time.now.at_end_of_month.day + 1) %>
            <% if Time.utc(@time.year, @time.month, @count) == Date.today %>
              <td class="today">
            <% elsif Time.utc(@time.year, @time.month, @count) < Date.today %>
              <td class="past">
            <% else %>
              <td>
            <% end %>
              <div class="cal-container">
                <p><%= @count %></p>
                  <ul>
                    <% @shifts.select{|shift| shift.date == Time.utc(@time.year, @time.month, @count)}.each do |shift| %>
                      <li><a href="/shifts/<%= shift.id %>"><%= shift.time_start.strftime('%l:%M %p') %> - <%= shift.time_end.strftime('%l:%M %p') %></a></li>
                    <% end %>
                  </ul>
              </div>
            </td>
          <% end %>
          <% @count += 1 %>
        <% end %>
      </tr>
    <% end %>






  </table>





<br>
<h3>

</h3>
<br>

<% @shifts.each do |shift| %>
  <% if shift.date > Time.now - 24.hours && shift.date < Time.utc(Time.now.year, Time.now.month + 2,) %>
    <div>
     <a href="/shifts/<%= shift.id %>"><%= shift.day_of_week.capitalize %>, <%= shift.date.strftime('%b %d, %Y') %></a> -- <%= shift.time_start.strftime('%I:%M %p') %> --- <%= shift.time_end.strftime('%I:%M %p') %>
    </div>
    <br>

  <% end %>

<% end %>